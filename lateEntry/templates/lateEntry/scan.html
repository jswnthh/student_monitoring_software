{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Scan ID Scanner</title>
    <link rel="stylesheet" href="{% static 'css/lateEntry/style.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="{% static 'manifest.json' %}">
    <meta name="theme-color" content="#000000" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Winky+Rough:ital,wght@0,300..900;1,300..900&display=swap"
        rel="stylesheet">

</head>

<body>
    <div class="container">
        <div class="scanner-section">
            <div id="status-message-main"></div>
            <div style="display: flex; justify-content: center; margin-top: 20px; margin-bottom: 20px;">
                <button onclick="window.location.href='/dashboard/'" class="btn btn-primary">Dashboard</button>
            </div>
            <div id="scanner-overlay" class="scanner-overlay-fullscreen" style="display: none;">
                <video id="video" class="video" autoplay muted playsinline></video>
                <button id="stop-btn" class="btn btn-danger" disabled>Stop Scanner</button>
                <div id="status-message-overlay"></div>
            </div>
            <div class="controls">
                <button id="start-btn" class="font-size-large btn">Start Scanner</button>
            </div>

            <div class="manual-input">
                <h3 class="font-large" style="margin-bottom: 15px;">Manual Entry</h3>
                <div class="input-group">
                    <input type="text" id="student-roll" placeholder="Student Roll No">
                </div>
                <button id="add-manual" class="btn btn-success">Add Student</button>
            </div>
        </div>

        <div class="students-section">
            <div class="students-header">
                <h2 class="font-large">Recorded Students</h2>
                <div class="students-count">
                    <span id="student-count" class="font-large">0</span>
                    <h2 class="font-large">students</h2>
                </div>
            </div>

            <div id="student-list" class="student-list">
                <div class="empty-state">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H19C20.11 23 21 22.11 21 21V9M19 9H15V5M7 11H17V13H7V11M7 15H17V17H7V15Z" />
                    </svg>
                    <p>No students recorded yet</p>
                    <p>Start scanning or add students manually</p>
                </div>
            </div>

            <div style="margin-top: 20px; text-align: center;">
                <!-- <button id="export-btn" class="btn" disabled>Export Data</button> -->
                <button id="record-btn" class="btn">record Data</button>
                <button id="clear-btn" class="btn btn-danger" disabled>Clear All</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
    <script src="{% static 'js/lateEntry/script.js' %}"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register("{% static 'service-worker.js' %}")
                .then(function (registration) {
                    console.log("Service Worker registered with scope:", registration.scope);
                }).catch(function (error) {
                    console.log("Service Worker registration failed:", error);
                });
        }
    </script>
</body>

</html>